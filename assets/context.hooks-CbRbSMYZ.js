import{u as m}from"./use-TW0LbYqD.js";import{r,G as v}from"./iframe-1BJ3w_50.js";import{v as g}from"./v4-C6aID195.js";const p=()=>{const o=r.useContext(v);if(!o)throw new Error("useDialogs must be used within an ProviderDialog");return o},R=o=>{const{add:u,remove:a,update:c}=p(),[d,l]=r.useState(null),t=r.useRef(null),e=m(o),n=r.useCallback(()=>{t.current&&(l(null),a(t.current),t.current=null)},[a]),f=r.useCallback(()=>{if(t.current)return;const s=g();l(s),t.current=s,u({id:s,props:e,onRemove:()=>{var i;n(),(i=e==null?void 0:e.onRemove)==null||i.call(e)}})},[u,e,n]);return r.useEffect(()=>{t.current&&c({id:t.current,props:e})},[e,c]),{add:f,remove:n,id:d}};export{R as u};
